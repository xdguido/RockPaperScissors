<!DOCTYPE html>
<html>
<head>
  <title>Rock, Paper or Scissors</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script> 

    //computer play selection.
  	const plays = ['r', 'p', 's'];

    function computerPlay() {

    return plays[Math.floor(Math.random() * plays.length)];

    };

    let computerSelection;
    let playerSelection;
    let userInput;
    let computerScore = 0;
    let playerScore = 0;

    function playRound() {

    computerSelection = computerPlay();

    //player play selection.
    userInput = prompt('Rock (R), Paper (P) or Scissors (S)?');
    playerSelection = userInput.toLowerCase().charAt(0);

    //game logic.
    if (playerSelection == computerSelection) {
    	alert(`IT\'S A TIE!\nPC: ${computerScore} - YOU: ${playerScore}`);
    }
    else if ((playerSelection == 'r' && computerSelection == 'p') ||
    		(playerSelection == 'p' && computerSelection == 's') ||
    		(playerSelection == 's' && computerSelection == 'r')) {
        computerScore = ++computerScore;
    	alert(`YOU LOSE!\nPC: ${computerScore} - YOU: ${playerScore}`);		
    		}
    else if ((playerSelection == 'r' && computerSelection == 's') ||
    		(playerSelection == 'p' && computerSelection == 'r') ||
    		(playerSelection == 's' && computerSelection == 'p')) {
        playerScore = ++playerScore;
    	alert(`YOU WIN!\nPC: ${computerScore} - YOU: ${playerScore}`);        		
    		}
    else {
    	playRound()
    };   

    };    

    //best of 5 points.
    function game() {
        playRound();
        if (computerScore == 3) {
            alert(`You lose the match! PC: ${computerScore} - YOU: ${playerScore}\nPress Enter to play again.`);
            computerScore = 0;
            playerScore = 0;
            game();
        }
        else if (playerScore == 3) {
            alert(`You won the match! PC: ${computerScore} - YOU: ${playerScore}\nPress Enter to play again.`);
            computerScore = 0;
            playerScore = 0;
            game();
        }
        else {
            game();
        } 
    };

    alert('Welcome to a best of 5 "Rock, Paper or Scissors" match!\nYou can select your play typing R, P or S.');
    game();
     
  </script>
</body>
</html>