<!DOCTYPE html>
<html>
<head>
  <title>Rock, Paper or Scissors</title>
  <meta charset="UTF-8"/>
  <style type="text/css">
      body {
        display: flex;
        flex-direction: column;
        margin: 0;  
        font-size: 25px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        align-items: center;
      }
      div {
        display: flex;
        gap: 8px;
      }
      button {
        height: 100px;
        width: 100px;
      }
  </style>
</head>
<body>

  <div>
    <div>
        <div>Computer:</div>
        <div id="pc-score"></div>
    </div>
    <div>
        <div>Player:</div>
        <div id="user-score"></div>
    </div>    
  </div>

  <div id="match-msg"></div>

  <div style="padding: 10px">
  <button style="font-size: 50px" id="r-btn">&#9994;</button>
  <button style="font-size: 50px" id="p-btn">&#9995;</button>
  <button style="font-size: 54px" id="s-btn">&#9996;</button>  
  </div>

  <script>

    const matchMsg = document.querySelector('#match-msg');
    const pcScore = document.querySelector('#pc-score');
    const userScore = document.querySelector('#user-score');
    const rBtn = document.querySelector('#r-btn');
    const pBtn = document.querySelector('#p-btn');
    const sBtn = document.querySelector('#s-btn');    

    rBtn.addEventListener('click', () => {
        playRound('r')});
    pBtn.addEventListener('click', () => {
        playRound('p')});
    sBtn.addEventListener('click', () => {
        playRound('s')}); 

    const plays = ['r', 'p', 's'];
    let computerSelection;
    let playerSelection;
    let computerScore = 0;
    let playerScore = 0;

       

    //computer play selection.
    function computerPlay() {

    return plays[Math.floor(Math.random() * plays.length)];

    };    

    function playRound(playerSelection) {

    computerSelection = computerPlay();

    //game logic.
    if (playerSelection == computerSelection) {    	
        matchMsg.textContent = 'Tie';
    }
    else if ((playerSelection == 'r' && computerSelection == 'p') ||
    		(playerSelection == 'p' && computerSelection == 's') ||
    		(playerSelection == 's' && computerSelection == 'r')) {
        computerScore = ++computerScore;
    	matchMsg.textContent = 'You lose';
        score();
        game();		
    		}
    else if ((playerSelection == 'r' && computerSelection == 's') ||
    		(playerSelection == 'p' && computerSelection == 'r') ||
    		(playerSelection == 's' && computerSelection == 'p')) {
        playerScore = ++playerScore;
    	matchMsg.textContent = 'You won';
        score();
        game();        		
    		}
    };    

    //best of 5 points.
    function game() {
        if (computerScore == 3) {
            alert(`You lose the match! ${computerScore} - ${playerScore}\nPress Enter to play again.`);
            computerScore = 0;
            playerScore = 0;
            score();
            startMsg();            
        }
        else if (playerScore == 3) {
            alert(`You won the match! ${computerScore} - ${playerScore}\nPress Enter to play again.`);
            computerScore = 0;
            playerScore = 0;
            score();
            startMsg();
        }         
    };

    function score() {
        pcScore.textContent = `${computerScore}`;
        userScore.textContent = `${playerScore}`;
    };

    function startMsg() {
        matchMsg.textContent = 'Choose your play';
    };

    score();
    startMsg();

     
  </script>
</body>
</html>